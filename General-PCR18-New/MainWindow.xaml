<Window x:Class="General_PCR18.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:General_PCR18"
        xmlns:lang="clr-namespace:General_PCR18.Lang"
        xmlns:uc="clr-namespace:General_PCR18.UControl"
        mc:Ignorable="d"
        Title="General-PCR18" Height="1080" Width="1920"
        PreviewMouseLeftButtonDown="WindowEdge_PreviewMouseLeftButtonDown"
        MouseMove="WindowEdge_MouseMove"
        MouseLeftButtonUp="WindowEdge_MouseLeftButtonUp">

    <Window.Resources>
        <Style x:Key="TabStyle" TargetType="DockPanel">
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Background" Value="#06919d" />
        </Style>

    </Window.Resources>

    <Grid Background="#e6f4f5">
        <uc:LoadingWait x:Name="loading" Visibility="Hidden"/>

        <Grid x:Name="mainGrid" Visibility="Hidden">
            <Grid.RowDefinitions>
                <RowDefinition Height="50"></RowDefinition>
                <RowDefinition></RowDefinition>
                <RowDefinition Height="50"></RowDefinition>
            </Grid.RowDefinitions>

            <!-- TOP -->
            <Grid Grid.Row="0" x:Name="TitleBar" PreviewMouseLeftButtonDown="TitleBar_PreviewMouseLeftButtonDown" MouseMove="TitleBar_MouseMove" MouseLeftButtonUp="TitleBar_MouseLeftButtonUp">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                </Grid.ColumnDefinitions>

                <!-- top左侧按钮 -->
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <Button Tag="experiment" Content="{Binding Res.experiment, Source={x:Static lang:RService.Current}}" 
                            Click="TopTab_Click"
                            Height="30" Width="100" Margin="20 10 0 0" Background="#06919d" Foreground="#fff"></Button>
                    <Button x:Name="btnExport" Tag="export" Content="{Binding Res.export, Source={x:Static lang:RService.Current}}" 
                            Click="TopTab_Click"
                            Height="30" Width="100" Margin="20 10 0 0" Background="#06919d" Foreground="#fff"></Button>

                    <Popup x:Name="popExport" StaysOpen="False" AllowsTransparency="True" Height="Auto" 
                           Width="{Binding ActualWidth,ElementName=btnExport}" 
                           Placement="Bottom" PopupAnimation="Slide" 
                           PlacementTarget="{Binding ElementName=btnExport}"  
                           LostFocus="ExportPopup_LostFocus" Closed="ExportPopup_Closed" Opened="ExportPopup_Opened">
                        <Border BorderBrush="#959593" BorderThickness="0.5" x:Name="borderExport">
                            <Menu Background="White"  VerticalAlignment="Top" Width="{Binding ActualWidth,ElementName=btnExport}"   >
                                <MenuItem Width="{Binding ActualWidth,ElementName=btnExport}"  Tag="select" Header="{Binding Res.export_select, Source={x:Static lang:RService.Current}}"                                              
                                          FontSize="12" Height="23.5" Click="MenuItem_Click" />
                                <MenuItem Width="{Binding ActualWidth,ElementName=btnExport}"  Tag="all" Header="{Binding Res.export_all, Source={x:Static lang:RService.Current}}" 
                                          FontSize="12"  Height="23.5" Click="MenuItem_Click" />
                            </Menu>
                        </Border>
                    </Popup>

                    <Button x:Name="btnImport" Tag="import" Content="{Binding Res.import, Source={x:Static lang:RService.Current}}" 
                        Click="TopTab_Click"
                        Height="30" Width="100" Margin="20 10 0 0" Background="#06919d" Foreground="#fff" Visibility="Collapsed"></Button>

                    <Button Tag="setting" Content="{Binding Res.setting, Source={x:Static lang:RService.Current}}" 
                            Click="TopTab_Click"
                            Height="30" Width="100" Margin="20 10 0 0" Background="#06919d" Foreground="#fff"></Button>

                    <Grid x:Name="gAnalysisParameters" Margin="20 10 0 0" Height="30" Width="160" Visibility="Collapsed">
                        <ComboBox x:Name="cmbAnalysisParametersTop" VerticalContentAlignment="Center" Height="30" Width="160" FontSize="{Binding FontSize, ElementName=btnExport}" SelectedIndex="-1" SelectionChanged="cmbAnalysisParametersTop_SelectionChanged">
                            <ComboBoxItem Content="Basic Parameters"></ComboBoxItem>
                            <ComboBoxItem Content="Crosstalk correction"></ComboBoxItem>
                            <ComboBoxItem Content="Filtr Parameters"></ComboBoxItem>
                            <ComboBoxItem Content="Turbility"></ComboBoxItem>
                        </ComboBox>
                        <TextBlock Text="{Binding Res.analysis_parameters, Source={x:Static lang:RService.Current}}" 
                                   VerticalAlignment="Center" Margin="8 0 0 0" Foreground="#666" IsHitTestVisible="False">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SelectedIndex, ElementName=cmbAnalysisParametersTop}" Value="-1">
                                            <Setter Property="Visibility" Value="Visible" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </Grid>

                    <!-- 测试按钮 -->
                    <Label
                        BorderThickness="0"
                        Background="Transparent"
                        Foreground="Transparent"                        
                        Content="TEST" MouseLeftButtonDown="Label_MouseLeftButtonDown" Height="30" Width="100" Margin="50 10 0 0">
                    </Label>
                </StackPanel>

                <!-- top右侧按钮 -->
                <DockPanel Grid.Column="1"  VerticalAlignment="Center" HorizontalAlignment="Right">
                    <TextBlock x:Name="username" Text="Admin"></TextBlock>

                    <TextBlock Margin="100 0 20 0"></TextBlock>

                    <Button Content="-" BorderThickness="0" Width="20" FontSize="16" 
                            Background="Transparent" Click="MiniButton_Click"></Button>

                    <Button Content="□" BorderThickness="0" Width="20" FontSize="14"
                            Margin="20 0 20 0"
                            Background="Transparent" Click="MaxButton_Click"></Button>

                    <Button Content="x" BorderThickness="0" Width="20" FontSize="16" 
                            Margin="0 0 20 0"
                            Background="Transparent" Click="CloseButton_Click"></Button>
                </DockPanel>
            </Grid>

            <!-- 实验 -->
            <Grid x:Name="experimentGrid" Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="150"></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                </Grid.ColumnDefinitions>

                <!-- 左侧菜单 -->
                <StackPanel x:Name="leftMenu" Grid.Column="0" Background="#fff"
                            Orientation="Vertical" Margin="0 20 0 0">
                    <DockPanel Height="60">
                        <uc:LeftTab Text="{Binding Res.sample_regiration, Source={x:Static lang:RService.Current}}" 
                                    ClickUri="pack://application:,,,/Images/SampleRegister.png" Click="True" Index="0"
                                    ClickEventTick="Tab1_ClickEventTick"></uc:LeftTab>
                    </DockPanel>

                    <DockPanel Height="60" Margin="0 20 0 0">
                        <uc:LeftTab Text="{Binding Res.run_monitor, Source={x:Static lang:RService.Current}}" 
                ClickUri="pack://application:,,,/Images/RunMonitor.png" ClickEventTick="Tab1_ClickEventTick" Index="1"></uc:LeftTab>
                    </DockPanel>

                    <DockPanel Height="60" Margin="0 20 0 0">
                        <uc:LeftTab Text="{Binding Res.data_analyse, Source={x:Static lang:RService.Current}}" 
ClickUri="pack://application:,,,/Images/DataAnalyse.png" ClickEventTick="Tab1_ClickEventTick" Index="2"></uc:LeftTab>
                    </DockPanel>

                    <DockPanel Height="60" Margin="0 20 0 0">
                        <uc:LeftTab Text="{Binding Res.heating_detection, Source={x:Static lang:RService.Current}}" 
ClickUri="pack://application:,,,/Images/SystemSet.png" ClickEventTick="Tab1_ClickEventTick" Index="3"></uc:LeftTab>
                    </DockPanel>

                </StackPanel>

                <!-- frame -->
                <Frame x:Name="FrameWork" Grid.Column="1"  NavigationUIVisibility="Hidden"></Frame>
            </Grid>

            <!-- 设置 -->
            <Grid x:Name="settingGrid" Grid.Row="1" Visibility="Hidden">
                <Frame x:Name="SettingFrame" NavigationUIVisibility="Hidden" Source="PageUi/SettingPage.xaml"></Frame>
            </Grid>
        </Grid>
    </Grid>

</Window>
